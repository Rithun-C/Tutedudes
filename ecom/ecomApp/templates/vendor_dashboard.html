{% extends "base.html" %}
{% block title %}Vendor Dashboard{% endblock %}
{% block content %}
<div class="container py-5">
    <h2 class="mb-4">üìã Vendor Dashboard</h2>
    <div class="row mb-4">
        <div class="col-md-12">
            <div class="alert alert-info">
                <i class="fas fa-info-circle me-2"></i>
                <strong>Welcome to your Vendor Dashboard!</strong> 
                Track your business performance with these analytics.
            </div>
        </div>
    </div>
    <!-- ANALYTICS CARDS -->
    <div class="row row-cols-2 row-cols-lg-4 g-3 mt-5 mb-3">
        <div class="col-md-3">
            <div class="card text-bg-primary mb-3">
                <div class="card-body text-center">
                    <h6 class="card-title">Total Products</h6>
                    <h3 class="card-text">{{ total_products }}</h3>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-bg-warning mb-3">
                <div class="card-body text-center">
                    <h6 class="card-title">Low Stock (&lt;10)</h6>
                    <h3 class="card-text">{{ low_stock_products }}</h3>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-bg-success mb-3">
                <div class="card-body text-center">
                    <h6 class="card-title">Average Price</h6>
                    <h3 class="card-text">‚Çπ{{ avg_price|floatformat:2 }}</h3>
                </div>
            </div>
        </div>
        <div class="col">
            <div class="card text-bg-success mb-3 h-100">
                <div class="card-body text-center">
                    <h6 class="card-title">Avg Rating</h6>
                    <h3 class="card-text">{{ avg_rating_overall|floatformat:1 }} ‚≠ê</h3>
                </div>
            </div>
        </div>
    </div>

    <!-- PERFORMANCE CARDS -->
    <div class="row mb-3">
        <div class="col-md-3">
            <div class="card text-bg-secondary mb-3">
                <div class="card-body text-center">
                    <h6 class="card-title">Sales (30&nbsp;d)</h6>
                    <h3 class="card-text">‚Çπ{{ sales_30|floatformat:2 }}</h3>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-bg-secondary mb-3">
                <div class="card-body text-center">
                    <h6 class="card-title">Units Sold (30&nbsp;d)</h6>
                    <h3 class="card-text">{{ units_30 }}</h3>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-bg-secondary mb-3">
                <div class="card-body text-center">
                    <h6 class="card-title">Avg Order Value</h6>
                    <h3 class="card-text">‚Çπ{{ aov_30|floatformat:2 }}</h3>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-bg-danger mb-3">
                <div class="card-body text-center">
                    <h6 class="card-title">Pending Orders</h6>
                    <h3 class="card-text">{{ pending_orders }}</h3>
                </div>
            </div>
        </div>
    </div>

    <!-- Top Products -->
    <div class="row mb-4">
        <div class="col-md-4">
            <div class="card text-bg-success mb-3">
                <div class="card-body text-center">
                    <h6 class="card-title">Avg Rating</h6>
                    <h3 class="card-text">{{ avg_rating_overall|floatformat:1 }} ‚≠ê</h3>
                </div>
            </div>
        </div>
        <div class="col-md-8">
            <div class="card mb-3">
                <div class="card-body">
                    <h6 class="card-title">Top Products (Last 30&nbsp;d)</h6>
                    <ul class="list-group list-group-flush">
                        {% for tp in top_products %}
                            <li class="list-group-item d-flex justify-content-between">
                                <span>{{ tp.product__name }}</span>
                                <span class="badge bg-primary">{{ tp.units }}</span>
                            </li>
                        {% empty %}
                            <li class="list-group-item">No sales data</li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

